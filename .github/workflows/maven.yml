name: develop
on:
  push:
    
env: 
  GITHUB_REPOSITORY : "Cat_or_Dog"
  PACKAGE_NAME      : "cat-or-dog-ver-${{ github.sha }}"

jobs:
  build_artefact:
    runs-on: ubuntu-latest
    environment: 
      name: dev
    steps:
    - 
      name: trying to get sec
      env:
        COURSE_SCRIPTS: ${{secrets.COURSE_SCRIPTS}}
      run: |
        echo "secrets.COURSE_SCRIPTS" = ${{ secrets.COURSE_SCRIPTS }}
        echo "secrets.COURSE_SCRIPTS = $COURSE_SCRIPTS
        echo $COURSE_SCRIPTS | base64 -d
        echo $COURSE_SCRIPTS | base64 -d > $RUNNER_TEMP/building.keystore 
        echo "runnertemp" $RUNNER_TEMP
        cd $RUNNER_TEMP
        ls -all
        cat building.keystore
        
    - name: cURL
      uses: indiesdev/curl@v1.1
      env: 
        COURSE_SCRIPTS: ${{secrets.COURSE_SCRIPTS}}
      with:
        url: https://api.github.com/repos/mstefani-source/course_scripts/dispatches
        method: "POST"
        accept: 200
        headers: '{ Accept: application/vnd.github.everest-preview+json }'
        bearer-token: $COURSE_SCRIPTS
        body: '{"event_type": "CatOrDog_app", "client_payload": {"foo": "bar"}}'

#      with:
#        args: "-X POST https://api.github.com/repos/mstefani-source/course_scripts/dispatches" -H "Authorization: token ${{ secrets.REPO_NAME }}" -H 'Accept: application/vnd.github.everest-preview+json' -d '{"event_type": "pingping", "client_payload": {"foo": "bar"}}'
